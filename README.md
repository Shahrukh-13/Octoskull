# Octoskull
This is my animatronic OctoSkull project. It is inspired by papercraft designer Methakura's OctoSkull papercraft.

![Animatronic_octoskull](https://github.com/user-attachments/assets/35480357-565d-4985-833a-e7f81111822b)

When I saw her papercraft I immediately thought that it will look so awesome if the tentacels could move, so I decided to make this animatronic project. The project uses 12 servosm The skull is made of paper and its design is taken from Methakura's free OctoSkull papercraft. The tentacles use different servos and the frame is built mostly with MG996/MG995 compatible servo brackets (I had to use some acrylic pieces for the microservos).

# System Block Diagram

![System block diagram](https://github.com/user-attachments/assets/56c909b7-f053-4203-b530-0f9aa01125a2)

# Blender project
In the blender project I have twelve armatures that represent the twelve servos, I have given Servo IDs 1-12. To setup armatures as servos you need to use Blender Servo Animation Add on: https://github.com/timhendriks93/blender-servo-animation. Once this addon is added you can set each armature as a servo and give it a unique ID.

![rec2-ezgif com-video-to-gif-converter](https://github.com/user-attachments/assets/b761d5fa-6bb4-4942-a8d3-2af8f3955650)

![Untitled1-ezgif com-video-to-gif-converter](https://github.com/user-attachments/assets/0c589af7-0f9e-4d46-a625-a6eb0865f5d2)

In live mode the unique servo ID is sent in the serial message to Arduino to control the corresponding servo. The serial message protocol is documented here: https://github.com/timhendriks93/blender-servo-animation?tab=readme-ov-file#command-protocol. Once the animation is ready to be exported, Blender generates a bone[] array for each servo, these bone[] arrays are used to play the animation on Arduino in a loop.

# Arduino
I am using Arduino Mega 2560 to control 12 Servos, WS2812 RGB LEDs, 3 Relays. 

The Reason I choose Arduino Mega 2560 is because I have both servos and WS2812 RGB LEDs in this project and if you use Arduino's servo library and FastLED library together in the same program you will see some problems. The problem happens because of the interrupts, Arduino's servo library uses interrupts and FastLED disables innterupts when it is writting to the LEDs. You can read more about the issue here: https://learn.adafruit.com/neopixels-and-servos/overview

The easy solution is to use Arduino Mega 2560 as it has 4 16-bit Timers, this allows us to control total 12 servos on pins 2, 3, 5, 6, 7, 8, 11, 12, 13, 44, 45, 46. For this I am using Adafruit_TiCoServo library.

There are 2 arduino sketches in the Octoskull/Arduino/ folder. Following is the brief description of each sketch:

1. **Octoskull-Animation.ino:** This sketch has both the RGB LED color palette as well as the servo animation. The servo animation Bone[]arrays that are generated by Blender are saved in the flash memeory of the microcontroller. The saved animation runs in a loop.
2. **Octoskull-Animation_live.ino:** reads serial data coming from blender to control the servo motors. This lets you do live animation from blender. You can use this sketch to create the animation, export the data and copy it in the Octoskull-Animation.ino sketch to run in a loop. This sketch does not write to WS2812 RGB LEDs because that FastLED library disables the Interrupts and that causes problems with the Serial Reads.

## Flowchart

![flowchart](https://github.com/user-attachments/assets/25cdc877-5eca-4f00-b7dd-fe03ea99a92a)
____________________________

![flowchart2 drawio (1)](https://github.com/user-attachments/assets/1f565036-1f94-49c3-a44e-1b38fa45d014)


## Arduino Libraries
I have the library files added in the Octoskull/Arduino/Library/ folder. I am also adding the Github links for the libraries here:

1. Adafruit_TiCoServo: https://github.com/adafruit/Adafruit_TiCoServo
2. FastLED: https://github.com/FastLED/FastLED
